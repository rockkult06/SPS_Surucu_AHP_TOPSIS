"use strict";(()=>{var e={};e.id=817,e.ids=[817],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},39984:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>g,originalPathname:()=>b,patchFetch:()=>S,requestAsyncStorage:()=>f,routeModule:()=>h,serverHooks:()=>d,staticGenerationAsyncStorage:()=>p,staticGenerationBailout:()=>m});var i={};r.r(i),r.d(i,{POST:()=>c});var a=r(95419),l=r(69108),s=r(99678),n=r(78070);let o=[0,0,.58,.9,1.12,1.24,1.32,1.41,1.45,1.49];function u(e){let t=e.length;if(0===t)return{weights:[],cr:0,isConsistent:!0};if(1===t)return{weights:[1],cr:0,isConsistent:!0};let r=Array(t).fill(0).map(()=>Array(t).fill(0)),i=Array(t).fill(0);for(let r=0;r<t;r++)for(let a=0;a<t;a++)i[r]+=e[a][r];for(let a=0;a<t;a++)for(let l=0;l<t;l++)r[a][l]=e[a][l]/i[l];let a=Array(t).fill(0);for(let e=0;e<t;e++){for(let i=0;i<t;i++)a[e]+=r[e][i];a[e]/=t}let l=Array(t).fill(0);for(let r=0;r<t;r++)for(let i=0;i<t;i++)l[r]+=e[r][i]*a[i];let s=0,n=0;for(let e=0;e<t;e++)0!==a[e]&&(s+=l[e]/a[e],n++);let u=((s=n>0?s/n:0)-t)/(t-1),c=o[t-1],h=0!==c?u/c:0;return{weights:a,cr:h,isConsistent:h<.1}}async function c(e){try{let t=await e.json();console.log("AHP calculation request data:",JSON.stringify(t,null,2));let{matrix:r,evaluatorName:i,hierarchyData:a}=t;if(a){if(!a.mainCriteria||!a.subCriteria)return n.Z.json({error:"Ge\xe7ersiz hiyerarşik veri yapısı"},{status:400});let e=function(e){let t=u(e.mainCriteria.matrix),r=t.weights,i=t.cr,a=t.isConsistent,l={},s={},n={};for(let t of Object.keys(e.subCriteria)){let r=e.subCriteria[t].matrix,i=e.subCriteria[t].ids;if(i.length>1){let e=u(r);l[t]=e.weights,s[t]=e.cr,n[t]=e.isConsistent}else 1===i.length?l[t]=[1]:l[t]=[],s[t]=0,n[t]=!0}let o={},c={},h={};for(let t of Object.keys(e.subSubCriteria)){let r=e.subSubCriteria[t].matrix,i=e.subSubCriteria[t].ids;if(i.length>1){let e=u(r);o[t]=e.weights,c[t]=e.cr,h[t]=e.isConsistent}else 1===i.length?o[t]=[1]:o[t]=[],c[t]=0,h[t]=!0}let f={},p=[];e.mainCriteria.ids.forEach((t,i)=>{let a=e.criteriaMap[t],s=r[i];a.isLeaf?(f[t]=s,p.push(t)):a.children&&a.children.length>0&&e.subCriteria[t]?.ids.forEach((r,i)=>{let a=e.criteriaMap[r],n=l[t]?.[i]||0;a.isLeaf?(f[r]=s*n,p.push(r)):a.children&&a.children.length>0&&e.subSubCriteria[r]?.ids.forEach((e,t)=>{let i=o[r]?.[t]||0;f[e]=s*n*i,p.push(e)})})});let d=Object.values(f).reduce((e,t)=>e+t,0);for(let e in f)f[e]=f[e]/d;let g=a&&Object.values(n).every(e=>e)&&Object.values(h).every(e=>e);return{mainWeights:r,mainCR:i,mainConsistent:a,subWeights:l,subCRs:s,subConsistent:n,subSubWeights:o,subSubCRs:c,subSubConsistent:h,globalWeights:f,leafCriteria:p,isOverallConsistent:g}}(a);console.log("Hierarchical AHP calculation result:",JSON.stringify(e,null,2));let t=Date.now().toString(36)+Math.random().toString(36).substring(2,7),r={...e,evaluatorName:i||"Anonim",evaluationId:t};return n.Z.json(r)}{if(!r||!Array.isArray(r)||0===r.length)return n.Z.json({error:"Ge\xe7ersiz matris verisi"},{status:400});let{weights:e,cr:t,isConsistent:a}=u(r);console.log("Flat AHP calculation result:",{weights:e,cr:t,isConsistent:a});let l=Date.now().toString(36)+Math.random().toString(36).substring(2,7);return n.Z.json({weights:e,cr:t,isConsistent:a,evaluatorName:i||"Anonim",evaluationId:l})}}catch(e){return console.error("AHP hesaplama hatası:",e),n.Z.json({error:"AHP hesaplaması sırasında bir hata oluştu"},{status:500})}}let h=new a.AppRouteRouteModule({definition:{kind:l.x.APP_ROUTE,page:"/api/calculate-ahp/route",pathname:"/api/calculate-ahp",filename:"route",bundlePath:"app/api/calculate-ahp/route"},resolvedPagePath:"D:\\SPS Clone\\SPS020725\\SPS_Surucu_AHP_TOPSIS\\app\\api\\calculate-ahp\\route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:f,staticGenerationAsyncStorage:p,serverHooks:d,headerHooks:g,staticGenerationBailout:m}=h,b="/api/calculate-ahp/route";function S(){return(0,s.patchFetch)({serverHooks:d,staticGenerationAsyncStorage:p})}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[638,206],()=>r(39984));module.exports=i})();