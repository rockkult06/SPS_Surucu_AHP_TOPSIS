(()=>{var e={};e.id=113,e.ids=[113],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6003:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d});var a=t(50482),s=t(69108),l=t(62563),n=t.n(l),i=t(68300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(r,o);let d=["",{children:["aggregate",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,9488)),"D:\\SPS Clone\\SPS020725\\SPS_Surucu_AHP_TOPSIS\\app\\aggregate\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,56046)),"D:\\SPS Clone\\SPS020725\\SPS_Surucu_AHP_TOPSIS\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\SPS Clone\\SPS020725\\SPS_Surucu_AHP_TOPSIS\\app\\aggregate\\page.tsx"],u="/aggregate/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/aggregate/page",pathname:"/aggregate",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},28381:(e,r,t)=>{Promise.resolve().then(t.bind(t,65970))},65970:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>M});var a=t(95344),s=t(3729),l=t(8428),n=t(61351),i=t(98462),o=t(62409),d="Progress",[c,u]=(0,i.b)(d),[m,x]=c(d),h=s.forwardRef((e,r)=>{var t,s;let{__scopeProgress:l,value:n=null,max:i,getValueLabel:d=g,...c}=e;(i||0===i)&&!y(i)&&console.error((t=`${i}`,`Invalid prop \`max\` of value \`${t}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let u=y(i)?i:100;null===n||b(n,u)||console.error((s=`${n}`,`Invalid prop \`value\` of value \`${s}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let x=b(n,u)?n:null,h=v(x)?d(x,u):void 0;return(0,a.jsx)(m,{scope:l,value:x,max:u,children:(0,a.jsx)(o.WV.div,{"aria-valuemax":u,"aria-valuemin":0,"aria-valuenow":v(x)?x:void 0,"aria-valuetext":h,role:"progressbar","data-state":j(x,u),"data-value":x??void 0,"data-max":u,...c,ref:r})})});h.displayName=d;var p="ProgressIndicator",f=s.forwardRef((e,r)=>{let{__scopeProgress:t,...s}=e,l=x(p,t);return(0,a.jsx)(o.WV.div,{"data-state":j(l.value,l.max),"data-value":l.value??void 0,"data-max":l.max,...s,ref:r})});function g(e,r){return`${Math.round(e/r*100)}%`}function j(e,r){return null==e?"indeterminate":e===r?"complete":"loading"}function v(e){return"number"==typeof e}function y(e){return v(e)&&!isNaN(e)&&e>0}function b(e,r){return v(e)&&!isNaN(e)&&e<=r&&e>=0}f.displayName=p;var k=t(91626);let N=s.forwardRef(({className:e,value:r,...t},s)=>a.jsx(h,{ref:s,className:(0,k.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...t,children:a.jsx(f,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(r||0)}%)`}})}));N.displayName=h.displayName;var S=t(81036),P=t(16212),w=t(84332),_="horizontal",C=["horizontal","vertical"],A=s.forwardRef((e,r)=>{let{decorative:t,orientation:s=_,...l}=e,n=C.includes(s)?s:_;return(0,a.jsx)(o.WV.div,{"data-orientation":n,...t?{role:"none"}:{"aria-orientation":"vertical"===n?n:void 0,role:"separator"},...l,ref:r})});A.displayName="Separator";let D=s.forwardRef(({className:e,orientation:r="horizontal",decorative:t=!0,...s},l)=>a.jsx(A,{ref:l,decorative:t,orientation:r,className:(0,k.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",e),...s}));D.displayName=A.displayName;var z=t(89895),O=t(91991),R=t(7060),E=t(38271),T=t(96885),H=t(78292),Z=t(26366);function M(){let e=(0,l.useRouter)(),[r,t]=(0,s.useState)([]),[i,o]=(0,s.useState)([]),[d,c]=(0,s.useState)({}),[u,m]=(0,s.useState)(!0),[x,h]=(0,s.useState)(null),p=(0,s.useMemo)(()=>(0,Z.RR)(),[]),f=(0,s.useCallback)(e=>Z.nK[e]?.name||e,[]),g=(0,s.useCallback)(e=>(0,Z.s9)(e).map(e=>Z.nK[e]?.name||e).join(" > "),[]);(0,s.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/ahp-evaluations");if(e.ok){let r=await e.json();t(r.evaluations||[])}else h("Değerlendirmeler y\xfcklenirken hata oluştu.")}catch(e){console.error("Değerlendirmeler y\xfcklenirken hata:",e),h("Değerlendirmeler y\xfcklenirken hata oluştu.")}finally{m(!1)}})()},[]),(0,s.useEffect)(()=>{if(0===i.length){c({});return}let e=r.filter(e=>i.includes(e.id));if(0===e.length)return;let t={};p.forEach(r=>{let a=e.map(e=>e.globalWeights[r.id]||0).filter(e=>e>0);a.length>0&&(t[r.id]=a.reduce((e,r)=>e+r,0)/a.length)}),c(t)},[i,r,p]);let j=(e,r)=>{o(t=>r?[...t,e]:t.filter(r=>r!==e))},v=e=>{o(e?r.map(e=>e.id):[])},y=async e=>{try{(await fetch(`/api/ahp-evaluations?id=${e}`,{method:"DELETE"})).ok?(t(r=>r.filter(r=>r.id!==e)),o(r=>r.filter(r=>r!==e))):alert("Değerlendirme silinirken hata oluştu.")}catch(e){console.error("Silme hatası:",e),alert("Değerlendirme silinirken hata oluştu.")}},b=(0,s.useCallback)(()=>{if(0===Object.keys(d).length){h("Dışa aktarılacak ortalama ağırlık bulunamadı.");return}let e=Object.entries(d).sort(([e],[r])=>f(e).localeCompare(f(r))).map(([e,r])=>({Kriter:f(e),"Kriter Yolu":g(e),Ağırlık:r,"Ağırlık (%)":(100*r).toFixed(2)+"%"})),r=H.P6.json_to_sheet(e),t=H.P6.book_new();H.P6.book_append_sheet(t,r,"Toplu AHP Ağırlıkları"),H.NC(t,"Toplu_AHP_Agirliklari.xlsx")},[d,f,g]);return u?(0,a.jsxs)("div",{className:"flex items-center justify-center min-h-[calc(100vh-80px)]",children:[a.jsx(N,{value:50,className:"w-1/2"}),a.jsx("p",{className:"ml-4 text-lg",children:"Değerlendirmeler y\xfckleniyor..."})]}):x?a.jsx("div",{className:"container mx-auto px-4 py-8 max-w-5xl",children:(0,a.jsxs)(n.Zb,{className:"card-shadow overflow-hidden border-0",children:[(0,a.jsxs)(n.Ol,{className:"bg-gradient-to-r from-red-500 to-red-600 text-primary-foreground py-8",children:[a.jsx(n.ll,{className:"text-2xl font-bold",children:"Hata"}),a.jsx(n.SZ,{className:"text-primary-foreground/90",children:x})]}),(0,a.jsxs)(n.aY,{className:"p-8 text-center",children:[a.jsx("p",{className:"text-muted-foreground",children:"L\xfctfen AHP değerlendirmelerinin y\xfcklendiğinden emin olun."}),a.jsx(P.z,{onClick:()=>e.push("/hierarchical-comparison"),className:"mt-4",children:"AHP \xd6l\xe7me Aracına Git"})]})]})}):a.jsx("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:(0,a.jsxs)(n.Zb,{className:"card-shadow overflow-hidden border-0",children:[(0,a.jsxs)(n.Ol,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-primary-foreground py-8",children:[(0,a.jsxs)(n.ll,{className:"text-2xl font-bold flex items-center gap-2",children:[a.jsx(z.Z,{className:"h-6 w-6"}),"Toplu AHP Ağırlıkları"]}),a.jsx(n.SZ,{className:"text-primary-foreground/90",children:"Farklı değerlendiricilerin AHP ağırlıklarını y\xf6netin ve ortalamalarını hesaplayın."})]}),(0,a.jsxs)(n.aY,{className:"p-8",children:[(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold",children:["AHP Değerlendirmeleri (",r.length,")"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(P.z,{onClick:()=>v(!0),variant:"outline",size:"sm",children:"T\xfcm\xfcn\xfc Se\xe7"}),a.jsx(P.z,{onClick:()=>v(!1),variant:"outline",size:"sm",children:"Se\xe7imi Temizle"})]})]}),0===r.length?a.jsx(n.Zb,{children:(0,a.jsxs)(n.aY,{className:"py-12 text-center",children:[a.jsx(O.Z,{className:"h-12 w-12 text-gray-400 mb-4 mx-auto"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Hen\xfcz AHP Değerlendirmesi Yok"}),a.jsx("p",{className:"text-gray-500 mb-4",children:"AHP ağırlıklarını hesaplamak i\xe7in \xf6nce değerlendirme yapın."}),a.jsx(P.z,{onClick:()=>e.push("/hierarchical-comparison"),children:"AHP Değerlendirmesi Yap"})]})}):(0,a.jsxs)(S.iA,{children:[a.jsx(S.xD,{children:(0,a.jsxs)(S.SC,{children:[a.jsx(S.ss,{className:"w-12",children:"Se\xe7"}),a.jsx(S.ss,{children:"Değerlendirici"}),a.jsx(S.ss,{children:"Tarih"}),a.jsx(S.ss,{children:"Tutarlılık (CR)"}),a.jsx(S.ss,{children:"Tutarlı mı?"}),a.jsx(S.ss,{className:"w-16",children:"İşlem"})]})}),a.jsx(S.RM,{children:r.map(e=>(0,a.jsxs)(S.SC,{children:[a.jsx(S.pj,{children:a.jsx(w.X,{checked:i.includes(e.id),onCheckedChange:r=>j(e.id,r)})}),a.jsx(S.pj,{className:"font-medium",children:e.evaluatorName}),a.jsx(S.pj,{children:new Date(e.date).toLocaleDateString()}),(0,a.jsxs)(S.pj,{children:[(100*e.mainCR).toFixed(2),"%"]}),a.jsx(S.pj,{children:e.isOverallConsistent?a.jsx(R.Z,{className:"h-4 w-4 text-green-600"}):a.jsx("span",{className:"text-red-600",children:"Tutarsız"})}),a.jsx(S.pj,{children:a.jsx(P.z,{variant:"ghost",size:"sm",onClick:()=>y(e.id),className:"text-red-600 hover:text-red-800",children:a.jsx(E.Z,{className:"h-4 w-4"})})})]},e.id))})]})]}),a.jsx(D,{className:"my-8"}),i.length>0&&Object.keys(d).length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold",children:["Ortalama Kriter Ağırlıkları (",i.length," değerlendirme)"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[a.jsx(P.z,{onClick:()=>{if(0===Object.keys(d).length){alert("Ortalama hesaplanacak değerlendirme se\xe7in.");return}i.length,new Date().toISOString(),alert("Ortalama ağırlıklar TOPSIS i\xe7in kaydedildi!")},className:"bg-green-600 hover:bg-green-700",children:"TOPSIS i\xe7in Kaydet"}),(0,a.jsxs)(P.z,{onClick:b,variant:"outline",children:[a.jsx(T.Z,{className:"h-4 w-4 mr-2"}),"Excel'e Aktar"]})]})]}),(0,a.jsxs)(S.iA,{children:[a.jsx(S.xD,{children:(0,a.jsxs)(S.SC,{children:[a.jsx(S.ss,{children:"Kriter"}),a.jsx(S.ss,{children:"Kriter Yolu"}),a.jsx(S.ss,{className:"text-right",children:"Ağırlık"}),a.jsx(S.ss,{className:"text-right",children:"Ağırlık (%)"}),a.jsx(S.ss,{className:"w-32",children:"G\xf6rsel"})]})}),a.jsx(S.RM,{children:Object.entries(d).sort(([,e],[,r])=>r-e).map(([e,r])=>(0,a.jsxs)(S.SC,{children:[a.jsx(S.pj,{className:"font-medium",children:f(e)}),a.jsx(S.pj,{className:"text-sm text-muted-foreground",children:g(e)}),a.jsx(S.pj,{className:"text-right font-mono",children:r.toFixed(4)}),(0,a.jsxs)(S.pj,{className:"text-right font-bold",children:[(100*r).toFixed(2),"%"]}),a.jsx(S.pj,{children:a.jsx(N,{value:100*r,className:"h-2"})})]},e))})]})]}),0===i.length&&(0,a.jsxs)("div",{className:"text-center py-8",children:[a.jsx(O.Z,{className:"h-12 w-12 text-gray-400 mb-4 mx-auto"}),a.jsx("p",{className:"text-gray-500",children:"Ortalama ağırlıkları g\xf6rmek i\xe7in değerlendirme se\xe7in."})]})]})]})})}},84332:(e,r,t)=>{"use strict";t.d(r,{X:()=>D});var a=t(95344),s=t(3729),l=t(31405),n=t(98462),i=t(85222),o=t(33183),d=t(92062),c=t(63085),u=t(43234),m=t(62409),x="Checkbox",[h,p]=(0,n.b)(x),[f,g]=h(x);function j(e){let{__scopeCheckbox:r,checked:t,children:l,defaultChecked:n,disabled:i,form:d,name:c,onCheckedChange:u,required:m,value:h="on",internal_do_not_use_render:p}=e,[g,j]=(0,o.T)({prop:t,defaultProp:n??!1,onChange:u,caller:x}),[v,y]=s.useState(null),[b,k]=s.useState(null),N=s.useRef(!1),S=!v||!!d||!!v.closest("form"),P={checked:g,disabled:i,setChecked:j,control:v,setControl:y,name:c,form:d,value:h,hasConsumerStoppedPropagationRef:N,required:m,defaultChecked:!w(n)&&n,isFormControl:S,bubbleInput:b,setBubbleInput:k};return(0,a.jsx)(f,{scope:r,...P,children:"function"==typeof p?p(P):l})}var v="CheckboxTrigger",y=s.forwardRef(({__scopeCheckbox:e,onKeyDown:r,onClick:t,...n},o)=>{let{control:d,value:c,disabled:u,checked:x,required:h,setControl:p,setChecked:f,hasConsumerStoppedPropagationRef:j,isFormControl:y,bubbleInput:b}=g(v,e),k=(0,l.e)(o,p),N=s.useRef(x);return s.useEffect(()=>{let e=d?.form;if(e){let r=()=>f(N.current);return e.addEventListener("reset",r),()=>e.removeEventListener("reset",r)}},[d,f]),(0,a.jsx)(m.WV.button,{type:"button",role:"checkbox","aria-checked":w(x)?"mixed":x,"aria-required":h,"data-state":_(x),"data-disabled":u?"":void 0,disabled:u,value:c,...n,ref:k,onKeyDown:(0,i.M)(r,e=>{"Enter"===e.key&&e.preventDefault()}),onClick:(0,i.M)(t,e=>{f(e=>!!w(e)||!e),b&&y&&(j.current=e.isPropagationStopped(),j.current||e.stopPropagation())})})});y.displayName=v;var b=s.forwardRef((e,r)=>{let{__scopeCheckbox:t,name:s,checked:l,defaultChecked:n,required:i,disabled:o,value:d,onCheckedChange:c,form:u,...m}=e;return(0,a.jsx)(j,{__scopeCheckbox:t,checked:l,defaultChecked:n,disabled:o,required:i,onCheckedChange:c,name:s,form:u,value:d,internal_do_not_use_render:({isFormControl:e})=>(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(y,{...m,ref:r,__scopeCheckbox:t}),e&&(0,a.jsx)(P,{__scopeCheckbox:t})]})})});b.displayName=x;var k="CheckboxIndicator",N=s.forwardRef((e,r)=>{let{__scopeCheckbox:t,forceMount:s,...l}=e,n=g(k,t);return(0,a.jsx)(u.z,{present:s||w(n.checked)||!0===n.checked,children:(0,a.jsx)(m.WV.span,{"data-state":_(n.checked),"data-disabled":n.disabled?"":void 0,...l,ref:r,style:{pointerEvents:"none",...e.style}})})});N.displayName=k;var S="CheckboxBubbleInput",P=s.forwardRef(({__scopeCheckbox:e,...r},t)=>{let{control:n,hasConsumerStoppedPropagationRef:i,checked:o,defaultChecked:u,required:x,disabled:h,name:p,value:f,form:j,bubbleInput:v,setBubbleInput:y}=g(S,e),b=(0,l.e)(t,y),k=(0,d.D)(o),N=(0,c.t)(n);s.useEffect(()=>{if(!v)return;let e=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set,r=!i.current;if(k!==o&&e){let t=new Event("click",{bubbles:r});v.indeterminate=w(o),e.call(v,!w(o)&&o),v.dispatchEvent(t)}},[v,k,o,i]);let P=s.useRef(!w(o)&&o);return(0,a.jsx)(m.WV.input,{type:"checkbox","aria-hidden":!0,defaultChecked:u??P.current,required:x,disabled:h,name:p,value:f,form:j,...r,tabIndex:-1,ref:b,style:{...r.style,...N,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});function w(e){return"indeterminate"===e}function _(e){return w(e)?"indeterminate":e?"checked":"unchecked"}P.displayName=S;var C=t(62312),A=t(91626);let D=s.forwardRef(({className:e,...r},t)=>a.jsx(b,{ref:t,className:(0,A.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...r,children:a.jsx(N,{className:(0,A.cn)("flex items-center justify-center text-current"),children:a.jsx(C.Z,{className:"h-4 w-4"})})}));D.displayName=b.displayName},7060:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},62312:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},89895:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});/**
 * @license lucide-react v0.331.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},9488:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>l,__esModule:()=>s,default:()=>n});let a=(0,t(86843).createProxy)(String.raw`D:\SPS Clone\SPS020725\SPS_Surucu_AHP_TOPSIS\app\aggregate\page.tsx`),{__esModule:s,$$typeof:l}=a,n=a.default},92062:(e,r,t)=>{"use strict";t.d(r,{D:()=>s});var a=t(3729);function s(e){let r=a.useRef({value:e,previous:e});return a.useMemo(()=>(r.current.value!==e&&(r.current.previous=r.current.value,r.current.value=e),r.current.previous),[e])}},63085:(e,r,t)=>{"use strict";t.d(r,{t:()=>l});var a=t(3729),s=t(16069);function l(e){let[r,t]=a.useState(void 0);return(0,s.b)(()=>{if(e){t({width:e.offsetWidth,height:e.offsetHeight});let r=new ResizeObserver(r=>{let a,s;if(!Array.isArray(r)||!r.length)return;let l=r[0];if("borderBoxSize"in l){let e=l.borderBoxSize,r=Array.isArray(e)?e[0]:e;a=r.inlineSize,s=r.blockSize}else a=e.offsetWidth,s=e.offsetHeight;t({width:a,height:s})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}t(void 0)},[e]),r}}};var r=require("../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[638,483,412,231,10],()=>t(6003));module.exports=a})();