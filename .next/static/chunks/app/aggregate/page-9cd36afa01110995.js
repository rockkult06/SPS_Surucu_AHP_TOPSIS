(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[113],{85167:function(e,l,r){Promise.resolve().then(r.bind(r,47773))},47773:function(e,l,r){"use strict";r.r(l),r.d(l,{default:function(){return y}});var s=r(3827),a=r(64090),t=r(47907),i=r(27815),n=r(37827),c=r(1657);let d=a.forwardRef((e,l)=>{let{className:r,value:a,...t}=e;return(0,s.jsx)(n.fC,{ref:l,className:(0,c.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...t,children:(0,s.jsx)(n.z$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:"translateX(-".concat(100-(a||0),"%)")}})})});d.displayName=n.fC.displayName;var o=r(19160),m=r(85754),h=r(54900),x=r(51014);let u=a.forwardRef((e,l)=>{let{className:r,orientation:a="horizontal",decorative:t=!0,...i}=e;return(0,s.jsx)(x.f,{ref:l,decorative:t,orientation:a,className:(0,c.cn)("shrink-0 bg-border","horizontal"===a?"h-[1px] w-full":"h-full w-[1px]",r),...i})});u.displayName=x.f.displayName;var j=r(34059),f=r(28814),p=r(46578),N=r(50489),g=r(44715),k=r(14323),b=r(61370);function y(){let e=(0,t.useRouter)(),[l,r]=(0,a.useState)([]),[n,c]=(0,a.useState)([]),[x,y]=(0,a.useState)({}),[v,w]=(0,a.useState)(!0),[C,S]=(0,a.useState)(null),A=(0,a.useMemo)(()=>(0,b.RR)(),[]),O=(0,a.useCallback)(e=>{var l;return(null===(l=b.nK[e])||void 0===l?void 0:l.name)||e},[]),z=(0,a.useCallback)(e=>(0,b.s9)(e).map(e=>{var l;return(null===(l=b.nK[e])||void 0===l?void 0:l.name)||e}).join(" > "),[]);(0,a.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/ahp-evaluations");if(e.ok){let l=await e.json();r(l.evaluations||[])}else S("Değerlendirmeler y\xfcklenirken hata oluştu.")}catch(e){console.error("Değerlendirmeler y\xfcklenirken hata:",e),S("Değerlendirmeler y\xfcklenirken hata oluştu.")}finally{w(!1)}})()},[]),(0,a.useEffect)(()=>{if(0===n.length){y({});return}let e=l.filter(e=>n.includes(e.id));if(0===e.length)return;let r={};A.forEach(l=>{let s=e.map(e=>e.globalWeights[l.id]||0).filter(e=>e>0);s.length>0&&(r[l.id]=s.reduce((e,l)=>e+l,0)/s.length)}),y(r)},[n,l,A]);let D=(e,l)=>{c(r=>l?[...r,e]:r.filter(l=>l!==e))},P=e=>{c(e?l.map(e=>e.id):[])},T=async e=>{try{(await fetch("/api/ahp-evaluations?id=".concat(e),{method:"DELETE"})).ok?(r(l=>l.filter(l=>l.id!==e)),c(l=>l.filter(l=>l!==e))):alert("Değerlendirme silinirken hata oluştu.")}catch(e){console.error("Silme hatası:",e),alert("Değerlendirme silinirken hata oluştu.")}},_=(0,a.useCallback)(()=>{if(0===Object.keys(x).length){S("Dışa aktarılacak ortalama ağırlık bulunamadı.");return}let e=Object.entries(x).sort((e,l)=>{let[r]=e,[s]=l;return O(r).localeCompare(O(s))}).map(e=>{let[l,r]=e;return{Kriter:O(l),"Kriter Yolu":z(l),Ağırlık:r,"Ağırlık (%)":(100*r).toFixed(2)+"%"}}),l=k.P6.json_to_sheet(e),r=k.P6.book_new();k.P6.book_append_sheet(r,l,"Toplu AHP Ağırlıkları"),k.NC(r,"Toplu_AHP_Agirliklari.xlsx")},[x,O,z]);return v?(0,s.jsxs)("div",{className:"flex items-center justify-center min-h-[calc(100vh-80px)]",children:[(0,s.jsx)(d,{value:50,className:"w-1/2"}),(0,s.jsx)("p",{className:"ml-4 text-lg",children:"Değerlendirmeler y\xfckleniyor..."})]}):C?(0,s.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-5xl",children:(0,s.jsxs)(i.Zb,{className:"card-shadow overflow-hidden border-0",children:[(0,s.jsxs)(i.Ol,{className:"bg-gradient-to-r from-red-500 to-red-600 text-primary-foreground py-8",children:[(0,s.jsx)(i.ll,{className:"text-2xl font-bold",children:"Hata"}),(0,s.jsx)(i.SZ,{className:"text-primary-foreground/90",children:C})]}),(0,s.jsxs)(i.aY,{className:"p-8 text-center",children:[(0,s.jsx)("p",{className:"text-muted-foreground",children:"L\xfctfen AHP değerlendirmelerinin y\xfcklendiğinden emin olun."}),(0,s.jsx)(m.z,{onClick:()=>e.push("/hierarchical-comparison"),className:"mt-4",children:"AHP \xd6l\xe7me Aracına Git"})]})]})}):(0,s.jsx)("div",{className:"container mx-auto px-4 py-8 max-w-7xl",children:(0,s.jsxs)(i.Zb,{className:"card-shadow overflow-hidden border-0",children:[(0,s.jsxs)(i.Ol,{className:"bg-gradient-to-r from-blue-500 to-blue-600 text-primary-foreground py-8",children:[(0,s.jsxs)(i.ll,{className:"text-2xl font-bold flex items-center gap-2",children:[(0,s.jsx)(j.Z,{className:"h-6 w-6"}),"Toplu AHP Ağırlıkları"]}),(0,s.jsx)(i.SZ,{className:"text-primary-foreground/90",children:"Farklı değerlendiricilerin AHP ağırlıklarını y\xf6netin ve ortalamalarını hesaplayın."})]}),(0,s.jsxs)(i.aY,{className:"p-8",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold",children:["AHP Değerlendirmeleri (",l.length,")"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(m.z,{onClick:()=>P(!0),variant:"outline",size:"sm",children:"T\xfcm\xfcn\xfc Se\xe7"}),(0,s.jsx)(m.z,{onClick:()=>P(!1),variant:"outline",size:"sm",children:"Se\xe7imi Temizle"})]})]}),0===l.length?(0,s.jsx)(i.Zb,{children:(0,s.jsxs)(i.aY,{className:"py-12 text-center",children:[(0,s.jsx)(f.Z,{className:"h-12 w-12 text-gray-400 mb-4 mx-auto"}),(0,s.jsx)("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Hen\xfcz AHP Değerlendirmesi Yok"}),(0,s.jsx)("p",{className:"text-gray-500 mb-4",children:"AHP ağırlıklarını hesaplamak i\xe7in \xf6nce değerlendirme yapın."}),(0,s.jsx)(m.z,{onClick:()=>e.push("/hierarchical-comparison"),children:"AHP Değerlendirmesi Yap"})]})}):(0,s.jsxs)(o.iA,{children:[(0,s.jsx)(o.xD,{children:(0,s.jsxs)(o.SC,{children:[(0,s.jsx)(o.ss,{className:"w-12",children:"Se\xe7"}),(0,s.jsx)(o.ss,{children:"Değerlendirici"}),(0,s.jsx)(o.ss,{children:"Tarih"}),(0,s.jsx)(o.ss,{children:"Tutarlılık (CR)"}),(0,s.jsx)(o.ss,{children:"Tutarlı mı?"}),(0,s.jsx)(o.ss,{className:"w-16",children:"İşlem"})]})}),(0,s.jsx)(o.RM,{children:l.map(e=>(0,s.jsxs)(o.SC,{children:[(0,s.jsx)(o.pj,{children:(0,s.jsx)(h.X,{checked:n.includes(e.id),onCheckedChange:l=>D(e.id,l)})}),(0,s.jsx)(o.pj,{className:"font-medium",children:e.evaluatorName}),(0,s.jsx)(o.pj,{children:new Date(e.date).toLocaleDateString()}),(0,s.jsxs)(o.pj,{children:[(100*e.mainCR).toFixed(2),"%"]}),(0,s.jsx)(o.pj,{children:e.isOverallConsistent?(0,s.jsx)(p.Z,{className:"h-4 w-4 text-green-600"}):(0,s.jsx)("span",{className:"text-red-600",children:"Tutarsız"})}),(0,s.jsx)(o.pj,{children:(0,s.jsx)(m.z,{variant:"ghost",size:"sm",onClick:()=>T(e.id),className:"text-red-600 hover:text-red-800",children:(0,s.jsx)(N.Z,{className:"h-4 w-4"})})})]},e.id))})]})]}),(0,s.jsx)(u,{className:"my-8"}),n.length>0&&Object.keys(x).length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsxs)("h3",{className:"text-lg font-semibold",children:["Ortalama Kriter Ağırlıkları (",n.length," değerlendirme)"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(m.z,{onClick:()=>{if(0===Object.keys(x).length){alert("Ortalama hesaplanacak değerlendirme se\xe7in.");return}let e={globalWeights:x,evaluatorName:"Toplu Ortalama (".concat(n.length," değerlendirme)"),date:new Date().toISOString(),isOverallConsistent:!0};localStorage.setItem("ahpResults",JSON.stringify(e)),alert("Ortalama ağırlıklar TOPSIS i\xe7in kaydedildi!")},className:"bg-green-600 hover:bg-green-700",children:"TOPSIS i\xe7in Kaydet"}),(0,s.jsxs)(m.z,{onClick:_,variant:"outline",children:[(0,s.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),"Excel'e Aktar"]})]})]}),(0,s.jsxs)(o.iA,{children:[(0,s.jsx)(o.xD,{children:(0,s.jsxs)(o.SC,{children:[(0,s.jsx)(o.ss,{children:"Kriter"}),(0,s.jsx)(o.ss,{children:"Kriter Yolu"}),(0,s.jsx)(o.ss,{className:"text-right",children:"Ağırlık"}),(0,s.jsx)(o.ss,{className:"text-right",children:"Ağırlık (%)"}),(0,s.jsx)(o.ss,{className:"w-32",children:"G\xf6rsel"})]})}),(0,s.jsx)(o.RM,{children:Object.entries(x).sort((e,l)=>{let[,r]=e,[,s]=l;return s-r}).map(e=>{let[l,r]=e;return(0,s.jsxs)(o.SC,{children:[(0,s.jsx)(o.pj,{className:"font-medium",children:O(l)}),(0,s.jsx)(o.pj,{className:"text-sm text-muted-foreground",children:z(l)}),(0,s.jsx)(o.pj,{className:"text-right font-mono",children:r.toFixed(4)}),(0,s.jsxs)(o.pj,{className:"text-right font-bold",children:[(100*r).toFixed(2),"%"]}),(0,s.jsx)(o.pj,{children:(0,s.jsx)(d,{value:100*r,className:"h-2"})})]},l)})})]})]}),0===n.length&&(0,s.jsxs)("div",{className:"text-center py-8",children:[(0,s.jsx)(f.Z,{className:"h-12 w-12 text-gray-400 mb-4 mx-auto"}),(0,s.jsx)("p",{className:"text-gray-500",children:"Ortalama ağırlıkları g\xf6rmek i\xe7in değerlendirme se\xe7in."})]})]})]})})}},54900:function(e,l,r){"use strict";r.d(l,{X:function(){return c}});var s=r(3827),a=r(64090),t=r(86969),i=r(80037),n=r(1657);let c=a.forwardRef((e,l)=>{let{className:r,...a}=e;return(0,s.jsx)(t.fC,{ref:l,className:(0,n.cn)("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r),...a,children:(0,s.jsx)(t.z$,{className:(0,n.cn)("flex items-center justify-center text-current"),children:(0,s.jsx)(i.Z,{className:"h-4 w-4"})})})});c.displayName=t.fC.displayName}},function(e){e.O(0,[425,581,981,932,971,69,744],function(){return e(e.s=85167)}),_N_E=e.O()}]);