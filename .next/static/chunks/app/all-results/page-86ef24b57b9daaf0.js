(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[682],{16131:function(e,l,s){Promise.resolve().then(s.bind(s,40065))},40065:function(e,l,s){"use strict";s.r(l),s.d(l,{default:function(){return j}});var a=s(3827),n=s(64090),r=s(27815),t=s(19160),i=s(85754),c=s(28814),o=s(50489),d=s(44715),x=s(14323),m=s(61370),u=s(46136),h=s(47907);function j(){let[e,l]=(0,n.useState)([]),[s,u]=(0,n.useState)(20),[j,f]=(0,n.useState)([]),[p,S]=(0,n.useState)({totalDrivers:0,avgC:0,maxC:0,minC:0,stdC:0,excellentCount:0,below1StdCount:0,below2StdCount:0}),[v,b]=(0,n.useState)([]),[g,N]=(0,n.useState)({labels:[],counts:[]}),[C,k]=(0,n.useState)("rank"),[P,y]=(0,n.useState)("asc"),[O,w]=(0,n.useState)({});(0,h.usePathname)();let I=(0,n.useMemo)(()=>{let l=[...e];return Object.entries(O).forEach(e=>{let[s,a]=e;a&&(l=l.filter(e=>{var l,n,r;return(null!==(r=null===(n=e.normalizedPerformance)||void 0===n?void 0:null===(l=n[s])||void 0===l?void 0:l.toString())&&void 0!==r?r:"").includes(a)}))}),"rank"===C||"closenessCoefficient"===C?l.sort((e,l)=>"asc"===P?e[C]-l[C]:l[C]-e[C]):l.sort((e,l)=>{var s,a,n,r,t,i,c,o;return"asc"===P?(null!==(t=null===(s=e.normalizedPerformance)||void 0===s?void 0:s[C])&&void 0!==t?t:0)-(null!==(i=null===(a=l.normalizedPerformance)||void 0===a?void 0:a[C])&&void 0!==i?i:0):(null!==(c=null===(n=l.normalizedPerformance)||void 0===n?void 0:n[C])&&void 0!==c?c:0)-(null!==(o=null===(r=e.normalizedPerformance)||void 0===r?void 0:r[C])&&void 0!==o?o:0)}),l},[e,C,P,O]);return(0,n.useEffect)(()=>{let e=(0,m.RR)();f(e.map(e=>({id:e.id,name:e.name})));let s=localStorage.getItem("topsisResults");if(console.log("Loading TOPSIS results from localStorage:",s?"Data found":"No data"),s)try{let a=JSON.parse(s);l(a),setEvaluatorName(a.evaluatorName||"Bilinmiyor"),setCalculationDate(a.date?new Date(a.date).toLocaleString():"Bilinmiyor");let n=a.topsisResults.map(e=>e.closenessCoefficient),r=n.reduce((e,l)=>e+l,0)/(n.length||1),t=Math.max(...n),i=Math.min(...n),c=Math.sqrt(n.reduce((e,l)=>e+Math.pow(l-r,2),0)/(n.length||1)),o=n.filter(e=>e>r+2*c).length,d=n.filter(e=>e<r-c).length,x=n.filter(e=>e<r-2*c).length;if(S({totalDrivers:n.length,avgC:r,maxC:t,minC:i,stdC:c,excellentCount:o,below1StdCount:d,below2StdCount:x}),a.topsisResults.length>0&&e.length>0){let l=e.map(e=>{let l=a.topsisResults.map(l=>{var s,a;return null!==(a=null===(s=l.normalizedPerformance)||void 0===s?void 0:s[e.id])&&void 0!==a?a:0}),s=l.reduce((e,l)=>e+l,0)/l.length,n=Math.sqrt(l.reduce((e,l)=>e+Math.pow(l-s,2),0)/l.length);return{id:e.id,name:e.name,avg:s,min:Math.min(...l),max:Math.max(...l),std:n}});b(l);let s=Array(10).fill(0);n.forEach(e=>{s[Math.min(9,Math.floor(10*e))]++}),N({labels:s.map((e,l)=>"".concat((l/10).toFixed(1),"–").concat(((l+1)/10).toFixed(1))),counts:s})}}catch(e){console.error("Error parsing TOPSIS results from localStorage:",e),setError("Kaydedilmiş TOPSIS sonu\xe7ları y\xfcklenirken bir hata oluştu.")}else setError("Hen\xfcz hesaplanmış bir TOPSIS sonucu bulunmamaktadır.")},[]),(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"text-2xl font-bold mb-4",children:"T\xfcm S\xfcr\xfcc\xfc Sonu\xe7ları"}),0===e.length?(0,a.jsx)(r.Zb,{children:(0,a.jsxs)(r.aY,{className:"flex flex-col items-center justify-center py-12",children:[(0,a.jsx)(c.Z,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"TOPSIS Sonucu Bulunamadı"}),(0,a.jsx)("p",{className:"text-gray-500 text-center mb-4",children:"Hen\xfcz bir TOPSIS hesaplaması yapılmamış. Sonu\xe7ları g\xf6rmek i\xe7in \xf6nce TOPSIS sayfasında hesaplama yapın."}),(0,a.jsx)(i.z,{onClick:()=>window.location.href="/topsis",className:"bg-blue-600 hover:bg-blue-700",children:"TOPSIS Hesaplaması Yap"})]})}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 mb-8",children:[(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"Toplam S\xfcr\xfcc\xfc Sayısı"})}),(0,a.jsx)(r.aY,{children:(0,a.jsx)("span",{className:"text-2xl font-bold",children:p.totalDrivers})})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"Ortalama TOPSIS Puanı"})}),(0,a.jsx)(r.aY,{children:(0,a.jsx)("span",{className:"text-2xl font-bold",children:p.avgC.toFixed(3)})})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"M\xfckemmel Performanslılar"})}),(0,a.jsx)(r.aY,{children:(0,a.jsx)("span",{className:"text-2xl font-bold",children:p.excellentCount})})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"Standart Sapma"})}),(0,a.jsx)(r.aY,{children:(0,a.jsx)("span",{className:"text-2xl font-bold",children:p.stdC.toFixed(3)})})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"1 Std. Altı S\xfcr\xfcc\xfc"})}),(0,a.jsx)(r.aY,{children:(0,a.jsx)("span",{className:"text-2xl font-bold",children:p.below1StdCount})})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"2 Std. Altı S\xfcr\xfcc\xfc"})}),(0,a.jsx)(r.aY,{children:(0,a.jsx)("span",{className:"text-2xl font-bold",children:p.below2StdCount})})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"En Y\xfcksek Puan Alanlar"})}),(0,a.jsx)(r.aY,{children:(0,a.jsx)("ul",{className:"space-y-1",children:I.slice(0,3).map((e,l)=>(0,a.jsxs)("li",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("span",{className:"font-semibold",children:[e.rank,"."]}),(0,a.jsx)("span",{className:"mx-2",children:e.driverId}),(0,a.jsx)("span",{className:"text-blue-700 font-bold",children:e.closenessCoefficient.toFixed(3)})]},e.driverId))})})]}),(0,a.jsxs)(r.Zb,{children:[(0,a.jsx)(r.Ol,{children:(0,a.jsx)(r.ll,{children:"En D\xfcş\xfck Puan Alanlar"})}),(0,a.jsx)(r.aY,{children:(0,a.jsx)("ul",{className:"space-y-1",children:I.slice(-3).map((e,l)=>(0,a.jsxs)("li",{className:"flex items-center justify-between text-sm",children:[(0,a.jsxs)("span",{className:"font-semibold",children:[e.rank,"."]}),(0,a.jsx)("span",{className:"mx-2",children:e.driverId}),(0,a.jsx)("span",{className:"text-red-700 font-bold",children:e.closenessCoefficient.toFixed(3)})]},e.driverId))})})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold",children:"S\xfcr\xfcc\xfc Sıralama Tablosu"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)(i.z,{onClick:()=>{l([]),S({totalDrivers:0,avgC:0,maxC:0,minC:0,stdC:0,excellentCount:0,below1StdCount:0,below2StdCount:0}),b([]),N({labels:[],counts:[]}),localStorage.removeItem("topsisResults"),u(20),k("rank"),y("asc"),w({})},variant:"outline",className:"flex items-center gap-2",children:[(0,a.jsx)(o.Z,{className:"h-4 w-4"}),"Sonu\xe7ları Temizle"]}),(0,a.jsxs)(i.z,{onClick:()=>{if(0===I.length){alert("Dışa aktarılacak veri bulunamadı.");return}let e=[["Sicil No",...j.map(e=>e.name),"TOPSIS Puanı (C*)","Sıralama"]];I.forEach(l=>{let s=[l.driverId,...j.map(e=>{var s,a,n;return null!==(n=null===(a=l.normalizedPerformance)||void 0===a?void 0:null===(s=a[e.id])||void 0===s?void 0:s.toFixed(3))&&void 0!==n?n:"-"}),l.closenessCoefficient.toFixed(3),l.rank.toString()];e.push(s)});let l=x.P6.aoa_to_sheet(e),s=x.P6.book_new();x.P6.book_append_sheet(s,l,"TOPSIS Sonu\xe7ları"),x.NC(s,"TOPSIS_Tum_Sonuclar_".concat(new Date().toLocaleDateString(),".xlsx"))},className:"flex items-center gap-2",children:[(0,a.jsx)(d.Z,{className:"h-4 w-4"}),"Excel'e Aktar"]})]})]}),(0,a.jsx)("div",{className:"overflow-x-scroll max-h-[600px] overflow-y-auto border rounded-lg scrollbar scrollbar-thumb-gray-400 scrollbar-track-gray-100",onScroll:e=>{let{scrollTop:l,scrollHeight:s,clientHeight:a}=e.currentTarget;l+a>=s-10&&u(e=>e+20)},children:(0,a.jsxs)(t.iA,{children:[(0,a.jsxs)(t.xD,{children:[(0,a.jsxs)(t.SC,{children:[(0,a.jsx)(t.ss,{children:"Sicil No"}),j.map(e=>(0,a.jsxs)(t.ss,{className:"cursor-pointer",onClick:()=>{k(e.id),y(l=>C===e.id&&"asc"===l?"desc":"asc")},children:[e.name,C===e.id?"asc"===P?" ▲":" ▼":""]},e.id)),(0,a.jsxs)(t.ss,{className:"cursor-pointer",onClick:()=>{k("closenessCoefficient"),y(e=>"closenessCoefficient"===C&&"asc"===e?"desc":"asc")},children:["TOPSIS Puanı (C*)","closenessCoefficient"===C?"asc"===P?" ▲":" ▼":""]}),(0,a.jsxs)(t.ss,{className:"cursor-pointer",onClick:()=>{k("rank"),y(e=>"rank"===C&&"asc"===e?"desc":"asc")},children:["Sıralama","rank"===C?"asc"===P?" ▲":" ▼":""]})]}),(0,a.jsxs)(t.SC,{children:[(0,a.jsx)(t.pj,{}),j.map(e=>(0,a.jsx)(t.pj,{children:(0,a.jsx)("input",{type:"text",className:"w-16 px-1 py-0.5 border rounded text-xs",placeholder:"Filtrele",value:O[e.id]||"",onChange:l=>w(s=>({...s,[e.id]:l.target.value}))})},e.id)),(0,a.jsx)(t.pj,{}),(0,a.jsx)(t.pj,{})]})]}),(0,a.jsxs)(t.RM,{children:[I.slice(0,s).map((e,l)=>(0,a.jsxs)(t.SC,{children:[(0,a.jsx)(t.pj,{children:e.driverId}),j.map(l=>{var s,n,r;return(0,a.jsx)(t.pj,{children:null!==(r=null===(n=e.normalizedPerformance)||void 0===n?void 0:null===(s=n[l.id])||void 0===s?void 0:s.toFixed(2))&&void 0!==r?r:"-"},l.id)}),(0,a.jsx)(t.pj,{children:e.closenessCoefficient.toFixed(3)}),(0,a.jsx)(t.pj,{children:e.rank})]},e.driverId)),0===I.length&&(0,a.jsx)(t.SC,{children:(0,a.jsx)(t.pj,{colSpan:j.length+3,className:"text-center text-muted-foreground",children:"Veri bulunamadı."})})]})]})})]})]})}u.kL.register(u.uw,u.f$,u.ZL,u.Dx,u.u,u.De)}},function(e){e.O(0,[425,674,581,496,932,971,69,744],function(){return e(e.s=16131)}),_N_E=e.O()}]);